<div class="py-6 px-16">
    <h1 class="text-3xl font-bold text-gray-900 mt-2 mb-4">Modificar contraseña</h1>
    <form method="post" class="mt-8 grid grid-cols-6 gap-6">
        @Html.AntiForgeryToken()
        <div class="col-span-6">
            <label class="block text-sm font-bold text-gray-700">Contraseña actual</label>
            <div class="relative">
                <div class="relative">
                    <input type="password" name="actual" class="ps-11 mt-1 w-full rounded-md border-gray-200 bg-white text-sm text-gray-700 shadow-sm focus:ring focus:outline-none" />
                    <div class="absolute inset-y-0 start-0 flex items-center ps-4">
                        <svg onclick="showPassword(this)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="mt-1 w-4 h-4">
                            <path fill-rule="evenodd" d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z" clip-rule="evenodd" />
                            <path d="m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-span-6">
            <label class="inline-block text-sm font-bold text-gray-700">Contraseña nueva</label>
            <div class="relative">
                <input type="password" name="nueva" class="ps-11 mt-1 w-full rounded-md border-gray-200 bg-white text-sm text-gray-700 shadow-sm focus:ring focus:outline-none" />
                <div class="absolute inset-y-0 start-0 flex items-center ps-4">
                    <svg onclick="showPassword(this)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="mt-1 w-4 h-4">
                        <path fill-rule="evenodd" d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z" clip-rule="evenodd" />
                        <path d="m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z" />
                    </svg>
                </div>
            </div>
        </div>
        <div class="col-span-6">
            <label class="inline-block text-sm font-bold text-gray-700">Confirmar nueva contraseña</label>
            <div class="relative">
                <input type="password" name="confirmar" class="ps-11 mt-1 w-full rounded-md border-gray-200 bg-white text-sm text-gray-700 shadow-sm focus:ring focus:outline-none" />
                <div class="absolute inset-y-0 start-0 flex items-center ps-4">
                    <svg onclick="showPassword(this)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="mt-1 w-4 h-4">
                        <path fill-rule="evenodd" d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z" clip-rule="evenodd" />
                        <path d="m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z" />
                    </svg>
                </div>
            </div>
        </div>
        <div class="col-span-6 sm:flex sm:items-center sm:gap-4">
            <button class="btn btn-primary w-48 font-medium transition">
                Modificar contraseña
            </button>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        function showPassword(e) {
            $(function () {
                let parent = $(e).parent();
                parent.siblings("input").attr("type", "text");
                parent.append($("#hideSVG").clone().removeClass("hidden"))
                $(e).remove();
            });
        }

        function hidePassword(e) {
            $(function () {
                let parent = $(e).parent();
                parent.siblings("input").attr("type", "password");
                parent.append($("#showSVG").clone().removeClass("hidden"))
                $(e).remove();
            });
        }
    </script>
    @if (ViewData["CASO"] != null)
    {
        <script>modal.showModal()</script>
    }
}

<svg id="hideSVG" onclick="hidePassword(this)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="mt-1 w-4 h-4 hidden">
    <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" />
    <path fill-rule="evenodd" d="M1.38 8.28a.87.87 0 0 1 0-.566 7.003 7.003 0 0 1 13.238.006.87.87 0 0 1 0 .566A7.003 7.003 0 0 1 1.379 8.28ZM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd" />
</svg>

<svg id="showSVG" onclick="showPassword(this)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="mt-1 w-4 h-4 hidden">
    <path fill-rule="evenodd" d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z" clip-rule="evenodd" />
    <path d="m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z" />
</svg>


@if (ViewData["CASO"] != null)
{
    <dialog id="modal" class="modal modal-bottom sm:modal-middle">
        <div class="modal-box">
            @if (ViewData["CASO"].ToString() == "1")
            {
                <h3 class="font-bold text-lg">Error al modificar contraseña :(</h3>
                <p class="py-4">Las contraseñas no coinciden</p>
            }
            else if (ViewData["CASO"].ToString() == "2")
            {
                <h3 class="font-bold text-lg">Error al modificar contraseña :(</h3>
                <p class="py-4">La contraseña actual introducida no es correcta</p>
            }
            else if (ViewData["CASO"].ToString() == "3")
            {
                <h3 class="font-bold text-lg">Acción exitosa</h3>
                <p class="py-4">Has cambiado tu contraseña</p>
            }
            <div class="modal-action">
                <form method="dialog">
                    <button class="btn btn-primary font-medium">Cerrar</button>
                </form>
            </div>
        </div>
    </dialog>
}